(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{417:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ed});var a=s(5155),r=s(2115);let n=()=>{try{if("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID)return"task_".concat(crypto.randomUUID())}catch(e){}return"task_".concat(Date.now(),"_").concat(Math.random().toString(36).slice(2,10))},o={create:e=>{let{description:t,projectId:s=null}=e;return{id:n(),description:t,projectId:s,status:"inbox",details:"",updates:[],pausedContext:null,resumeDate:null,doneRemarks:null,createdAt:new Date().toISOString(),completedAt:null}}},l={create:function(){let{space:e="Work"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{space:e}}},i={create:e=>{let{email:t,password:s}=e;return{id:"user_".concat(Date.now()),email:t,password:s,createdAt:new Date().toISOString()}}},d=function(){var e,t;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"anonymous",a="solo-flow-tasks",r=e=>"".concat(a,"+").concat(s,"+").concat(e);return s=null!==(t=null===(e=u().getAuthenticatedUser())||void 0===e?void 0:e.id)&&void 0!==t?t:"anonymous",{getAll:e=>{let t=e||localStorage.getItem("solo-flow-space-".concat(s))||"Work",a=JSON.parse(localStorage.getItem(r(t))||"[]"),n=new Set,o=[];for(let e of a)e&&e.id&&!n.has(e.id)&&(n.add(e.id),o.push(e));return o.length!==a.length&&localStorage.setItem(r(t),JSON.stringify(o,null,2)),o},save:e=>{let t=localStorage.getItem("solo-flow-space-".concat(s))||"Work",a=JSON.parse(localStorage.getItem(r(t))||"[]");a.unshift(e);let n=new Set,o=a.filter(e=>!(!e||!e.id||n.has(e.id))&&(n.add(e.id),!0));localStorage.setItem(r(t),JSON.stringify(o,null,2))},update:e=>{let t=localStorage.getItem("solo-flow-space-".concat(s))||"Work",a=JSON.parse(localStorage.getItem(r(t))||"[]");a=a.map(t=>t.id===e.id?e:t),localStorage.setItem(r(t),JSON.stringify(a,null,2))},findById:e=>{let t=localStorage.getItem("solo-flow-space-".concat(s))||"Work";return JSON.parse(localStorage.getItem(r(t))||"[]").find(t=>t.id===e)},merge:e=>{let t=[...d("anonymous").getAll("Work"),...d(e).getAll("Work")],s=new Set,r=t.filter(e=>!(!e||!e.id||s.has(e.id))&&(s.add(e.id),!0));localStorage.setItem("".concat(a,"+").concat(e,"+Work"),JSON.stringify(r,null,2)),localStorage.removeItem("".concat(a,"+anonymous+Work")),localStorage.removeItem("".concat(a,"+anonymous+Personal")),localStorage.removeItem("".concat(a,"+anonymous+Project"))}}},c=e=>{var t,s;e=null!==(s=null===(t=u().getAuthenticatedUser())||void 0===t?void 0:t.id)&&void 0!==s?s:"anonymous";let a="solo-flow-space-".concat(e),r=l.create();return{get:()=>{var t;let s=JSON.parse(null!==(t=localStorage.getItem(a))&&void 0!==t?t:"");return!1==!!s&&c(e).save(r),s?{space:s}:r},save:e=>{localStorage.setItem(a,JSON.stringify(e.space,null,2))}}},u=()=>{let e="pulse-note-auth";return{getAuthenticatedUser:()=>{let t=localStorage.getItem(e);return t?JSON.parse(t):null},setAuthenticatedUser:t=>{localStorage.setItem(e,JSON.stringify(t,null,2))},clearAuthenticatedUser:()=>{localStorage.removeItem(e)}}},m=(()=>{let e="pulse-note-users";return{findByEmail:t=>JSON.parse(localStorage.getItem(e)||"[]").find(e=>e.email===t),save:t=>{let s=JSON.parse(localStorage.getItem(e)||"[]");s.push(t),localStorage.setItem(e,JSON.stringify(s,null,2))}}})(),p=u(),g=()=>({signUp:(e,t)=>{if(!e||!t)return{success:!1,error:"Email and password are required."};if(m.findByEmail(e))return{success:!1,error:"User with this email already exists."};let s=i.create({email:e,password:t});return m.save(s),p.setAuthenticatedUser(s),d().merge(s.id),{success:!0,user:s}},signIn:(e,t)=>{let s=m.findByEmail(e);return s&&s.password===t?(p.setAuthenticatedUser(s),d().merge(s.id),{success:!0,user:s}):{success:!1,error:"Invalid email or password."}},signOut:()=>(p.clearAuthenticatedUser(),{success:!0}),getCurrentUser:()=>({success:!0,user:p.getAuthenticatedUser()})}),x=()=>{var e;let{user:t}=g().getCurrentUser(),s=d(null==t?void 0:t.id),a=null!==(e=null==t?void 0:t.id)&&void 0!==e?e:"anonymous";return{getInitialState:()=>{let e=localStorage.getItem("solo-flow-space-".concat(a))||"Work";return{tasks:s.getAll(e)}},addTask:e=>{if(!e||""===e.trim())return{success:!1,error:"Task description cannot be empty."};let t=e.match(/\s#([\w-]+)$/),r=t?t[1]:null,n=o.create({description:e,projectId:r});s.save(n);let l=localStorage.getItem("solo-flow-space-".concat(a))||"Work";return{success:!0,tasks:s.getAll(l)}},moveTaskToToday:e=>{let t=s.findById(e);if(t){t.status="today",s.update(t);let e=localStorage.getItem("solo-flow-space-".concat(a))||"Work";return{success:!0,tasks:s.getAll(e)}}return{success:!1,error:"Task not found."}},pauseTask:(e,t)=>{let{context:r,resumeDate:n}=t,o=s.findById(e);if(o){o.status="paused",o.pausedContext=r,o.resumeDate=n,s.update(o);let e=localStorage.getItem("solo-flow-space-".concat(a))||"Work";return{success:!0,tasks:s.getAll(e)}}return{success:!1,error:"Task not found."}},resumeTask:e=>{let t=s.findById(e);if(t){t.status="today",t.pausedContext=null,t.resumeDate=null,s.update(t);let e=localStorage.getItem("solo-flow-space-".concat(a))||"Work";return{success:!0,tasks:s.getAll(e)}}return{success:!1,error:"Task not found."}},completeTask:(e,t)=>{let{remarks:r}=t,n=s.findById(e);if(n){n.status="done",n.doneRemarks=r,n.completedAt=new Date().toISOString(),s.update(n);let e=localStorage.getItem("solo-flow-space-".concat(a))||"Work";return{success:!0,tasks:s.getAll(e)}}return{success:!1,error:"Task not found."}},updateTaskField:(e,t,r)=>{let n=s.findById(e);if(n&&void 0!==n[t]){n[t]=r,s.update(n);let e=localStorage.getItem("solo-flow-space-".concat(a))||"Work";return{success:!0,tasks:s.getAll(e)}}return{success:!1,error:"Task or field '".concat(t,"' not found.")}},addTaskUpdate:(e,t)=>{let r=s.findById(e);if(r){r.updates=[t,...r.updates||[]],s.update(r);let e=localStorage.getItem("solo-flow-space-".concat(a))||"Work";return{success:!0,tasks:s.getAll(e)}}return{success:!1,error:"Task not found."}}}},f=()=>{let e=g().getCurrentUser(),t=c(e.user?e.user.id:"");return{getSettings:()=>t.get(),setSpace:e=>{let s=t.get();return s.space=e,t.save(s),{success:!0,settings:s}}}},h=e=>{let{handleSpaceChange:t}=e,[s,n]=(0,r.useState)(),o=e=>{n({space:e}),t(e)};return(0,r.useEffect)(()=>{n(f().getSettings())},[]),(0,a.jsx)("div",{className:"max-w-md w-full p-4",children:(0,a.jsxs)("fieldset",{children:[(0,a.jsx)("legend",{className:"text-lg font-semibold text-white mb-4",children:"Select Your Current Space"}),(0,a.jsx)("div",{className:"space-y-3",children:[{id:"space-work",value:"Work",label:"Work Day"},{id:"space-personal",value:"Personal",label:"Personal Day"},{id:"space-project",value:"Project",label:"Project Day"}].map(e=>(0,a.jsxs)("label",{htmlFor:e.id,className:"flex items-center justify-between w-full p-4 cursor-pointer bg-gray-900 border border-gray-700 rounded-lg hover:bg-gray-800",children:[(0,a.jsx)("span",{className:"text-gray-200 font-medium",children:e.label}),(0,a.jsx)("input",{type:"radio",id:e.id,name:"space",value:e.value,checked:(null==s?void 0:s.space)===e.value,onChange:e=>o(e.target.value),className:"form-radio h-5 w-5 text-orange-600 bg-gray-700 border-gray-600 focus:ring-orange-500"})]},e.id))})]})})};var b=s(2505),v=s(450),y=s(2596),j=s(9688);function w(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,j.QP)((0,y.$)(t))}function k(e){let{...t}=e;return(0,a.jsx)(b.bL,{"data-slot":"dialog",...t})}function N(e){let{...t}=e;return(0,a.jsx)(b.ZL,{"data-slot":"dialog-portal",...t})}function S(e){let{className:t,...s}=e;return(0,a.jsx)(b.hJ,{"data-slot":"dialog-overlay",className:w("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function C(e){let{className:t,children:s,showCloseButton:r=!0,...n}=e;return(0,a.jsxs)(N,{"data-slot":"dialog-portal",children:[(0,a.jsx)(S,{}),(0,a.jsxs)(b.UC,{"data-slot":"dialog-content",className:w("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[s,r&&(0,a.jsxs)(b.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(v.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function I(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:w("flex flex-col gap-2 text-center sm:text-left",t),...s})}function A(e){let{className:t,...s}=e;return(0,a.jsx)(b.hE,{"data-slot":"dialog-title",className:w("text-lg leading-none font-semibold",t),...s})}function U(e){let{className:t,type:s,...r}=e;return(0,a.jsx)("input",{type:s,"data-slot":"input",className:w("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r})}var D=s(9708);let T=(0,s(2085).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function O(e){let{className:t,variant:s,size:r,asChild:n=!1,...o}=e,l=n?D.DX:"button";return(0,a.jsx)(l,{"data-slot":"button",className:w(T({variant:s,size:r,className:t})),...o})}var E=s(968);function F(e){let{className:t,...s}=e;return(0,a.jsx)(E.b,{"data-slot":"label",className:w("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}let P=e=>{let{open:t,onOpenChange:s,onSignUp:n}=e,[o,l]=(0,r.useState)(""),[i,d]=(0,r.useState)("");return(0,a.jsx)(k,{open:t,onOpenChange:s,children:(0,a.jsxs)(C,{className:"max-w-md",children:[(0,a.jsx)(I,{children:(0,a.jsx)(A,{children:"Sign Up"})}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(o,i)},className:"mt-4",children:[(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(F,{htmlFor:"email",children:"Email"}),(0,a.jsx)(U,{id:"email",type:"email",placeholder:"m@example.com",required:!0,value:o,onChange:e=>l(e.target.value)})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(F,{htmlFor:"password",children:"Password"}),(0,a.jsx)(U,{id:"password",type:"password",required:!0,value:i,onChange:e=>d(e.target.value)})]})]}),(0,a.jsx)(O,{type:"submit",className:"mt-4 w-full",children:"Sign Up"})]})]})})},z=e=>{let{open:t,onOpenChange:s,onSignIn:n}=e,[o,l]=(0,r.useState)(""),[i,d]=(0,r.useState)("");return(0,a.jsx)(k,{open:t,onOpenChange:s,children:(0,a.jsxs)(C,{className:"max-w-md",children:[(0,a.jsx)(I,{children:(0,a.jsx)(A,{children:"Sign In"})}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(o,i)},className:"mt-4",children:[(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(F,{htmlFor:"email",children:"Email"}),(0,a.jsx)(U,{id:"email",type:"email",placeholder:"m@example.com",required:!0,value:o,onChange:e=>l(e.target.value)})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(F,{htmlFor:"password",children:"Password"}),(0,a.jsx)(U,{id:"password",type:"password",required:!0,value:i,onChange:e=>d(e.target.value)})]})]}),(0,a.jsx)(O,{type:"submit",className:"mt-4 w-full",children:"Sign In"})]})]})})},W=e=>{let{onSignInClick:t,onSignUpClick:s}=e;return(0,a.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center bg-gray-900 text-white",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-5xl font-bold",children:"Welcome to DevNote"}),(0,a.jsx)("p",{className:"mt-4 text-lg text-gray-400",children:"A minimalist to-do app for developers."}),(0,a.jsxs)("div",{className:"mt-8 space-x-4",children:[(0,a.jsx)(O,{onClick:t,variant:"outline",children:"Sign In"}),(0,a.jsx)(O,{onClick:s,children:"Sign Up"})]})]})})};var J=s(3196);let B=J.bL,_=J.l9;J.YJ,J.ZL,J.Pb,J.z6,r.forwardRef((e,t)=>{let{className:s,inset:r,children:n,...o}=e;return(0,a.jsxs)(J.ZP,{ref:t,className:w("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-orange-500 data-[state=open]:bg-orange-500",r&&"pl-8",s),...o,children:[n,(0,a.jsx)(V,{className:"ml-auto h-4 w-4"})]})}).displayName=J.ZP.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(J.G5,{ref:t,className:w("z-50 min-w-[8rem] overflow-hidden rounded-md border border-gray-700 bg-gray-800 p-1 text-white shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}).displayName=J.G5.displayName;let R=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...n}=e;return(0,a.jsx)(J.ZL,{children:(0,a.jsx)(J.UC,{ref:t,sideOffset:r,className:w("z-50 min-w-[8rem] overflow-hidden rounded-md border border-gray-700 bg-gray-800 p-1 text-white shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})})});R.displayName=J.UC.displayName;let L=r.forwardRef((e,t)=>{let{className:s,inset:r,...n}=e;return(0,a.jsx)(J.q7,{ref:t,className:w("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-orange-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",s),...n})});function M(e){return(0,a.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"M20 6 9 17l-5-5"})})}function V(e){return(0,a.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"m9 18 6-6-6-6"})})}function q(e){return(0,a.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"})})}L.displayName=J.q7.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,checked:n,...o}=e;return(0,a.jsxs)(J.H_,{ref:t,className:w("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-orange-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:n,...o,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(J.VF,{children:(0,a.jsx)(M,{className:"h-4 w-4"})})}),r]})}).displayName=J.H_.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(J.hN,{ref:t,className:w("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-orange-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(J.VF,{children:(0,a.jsx)(q,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=J.hN.displayName,r.forwardRef((e,t)=>{let{className:s,inset:r,...n}=e;return(0,a.jsx)(J.JU,{ref:t,className:w("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",s),...n})}).displayName=J.JU.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(J.wv,{ref:t,className:w("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=J.wv.displayName;let K=e=>{let{email:t,onSignOut:s}=e;return(0,a.jsx)("header",{className:"text-center mb-10",children:(0,a.jsxs)("p",{className:"mt-2 text-lg text-gray-400",children:["Become a better engineer. \xa0",(0,a.jsxs)(B,{children:[(0,a.jsx)(_,{asChild:!0,children:(0,a.jsx)("button",{className:"text-lg text-gray-400 hover:text-white",children:":::"})}),(0,a.jsx)(R,{children:(0,a.jsxs)(L,{onSelect:s,children:["Sign Out ",t," "]})})]})]})})},Z=e=>{let{searchQuery:t,onSearchQueryChange:s,onSearchSubmit:r}=e;return(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("form",{onSubmit:r,className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search tasks or add a new one...",value:t,onChange:e=>s(e.target.value),className:"w-full bg-gray-800 border-2 border-gray-700 rounded-lg py-3 px-4 pl-10 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition"}),(0,a.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-500 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",onClick:e=>{var t;return null===(t=e.currentTarget.closest("form"))||void 0===t?void 0:t.requestSubmit()},children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})]})})},Y=e=>{let{currentView:t,counts:s,activeFilterProject:r,onSetCurrentView:n,onClearActiveFilterProject:o}=e;return(0,a.jsxs)("div",{className:"border-b border-gray-700 mb-8",children:[(0,a.jsx)("nav",{className:"flex flex-wrap space-x-1 sm:space-x-2",children:["inbox","today","paused","done","spaces"].map(e=>{var r,o,l,i;return(0,a.jsxs)("button",{onClick:()=>n(e),className:"nav-btn py-2 px-4 font-medium border-b-2 ".concat(t===e?"text-orange-500 border-orange-500":"text-gray-400 border-transparent hover:text-white"),children:[e.charAt(0).toUpperCase()+e.slice(1),"inbox"===e&&parseInt(null!==(i=null===(l=s.inbox)||void 0===l?void 0:null===(o=l.split(":"))||void 0===o?void 0:null===(r=o[1])||void 0===r?void 0:r.trim())&&void 0!==i?i:"0")>8&&(0,a.jsx)("span",{className:"mt-1",children:" \uD83D\uDD25 "})]},e)})}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-500 flex flex-wrap gap-x-4",children:[(0,a.jsx)("span",{children:s.inbox}),(0,a.jsx)("span",{children:s.today}),(0,a.jsx)("span",{children:s.paused}),(0,a.jsx)("span",{children:s.done})]}),r&&(0,a.jsxs)("div",{className:"items-center mt-2 flex",children:[(0,a.jsx)("span",{className:"text-sm mr-2 text-gray-400",children:"Filtering by:"}),(0,a.jsx)("span",{className:"text-xs bg-gray-700 text-orange-400 px-2 py-1 rounded-full",children:"#".concat(r)}),(0,a.jsx)("button",{onClick:o,className:"ml-2 text-xl font-bold text-gray-500 hover:text-white",children:"\xd7"})]})]})},H=e=>{let{text:t}=e,s=/(https?:\/\/[^\s]+)/g,r=t.split(s);return(0,a.jsx)("p",{className:"text-gray-200",children:r.map((e,t)=>e.match(s)?(0,a.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",onClick:e=>e.stopPropagation(),children:e},t):e)})},Q=e=>{let{str:t,onClick:s,...n}=e,o=(0,r.useMemo)(()=>(function(e){try{let t=JSON.parse(e);return null!==t&&("object"==typeof t||Array.isArray(t))}catch(e){return console.log("Invalid JSON:",e),!1}})(t),[t]);return(0,a.jsx)(a.Fragment,{children:o?(0,a.jsx)("code",{onClick:s,className:"whitespace-pre-wrap\n  block\n  bg-gray-900\n  text-white\n  text-sm\n  font-mono\n  rounded-md\n  p-4\n  min-h-[20px]\n  overflow-x-auto\n  shadow-sm\n  cursor-pointer\n  transition\n  duration-200\n  ease-in-out\n  focus:outline-none\n  focus:ring-2\n  focus:ring-white\n  focus:ring-offset-2\n  select-textt",...n,children:t}):(0,a.jsxs)("div",{onClick:s,className:"flex items-start whitespace-pre-wrap text-sm text-gray-400 min-h-[20px] break-words break-all",...n,children:[(0,a.jsx)("div",{className:"ml-[15px] mr-3",children:"-"}),(0,a.jsx)("div",{children:t})]})})};function G(e){e.style.height=25+e.scrollHeight+"px"}let X=e=>{let{task:t,onAction:s,onEditField:n,currentView:o,onAddUpdate:l,onProjectFilter:i,children:d}=e,[c,u]=(0,r.useState)(!0),[m,p]=(0,r.useState)(null),[g,x]=(0,r.useState)(""),[f,h]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),y=(e,s)=>{p(null),n(t.id,e,s)};return(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg","data-task-id":t.id,children:[(0,a.jsxs)("div",{className:"p-4 flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)(er,{setIsDetailsOpen:u,isDetailsOpen:c,isEditing:m,task:t,handleEdit:y,setIsEditing:p,onProjectFilter:i}),"done"===t.status&&(0,a.jsx)(ee,{task:t}),"paused"===t.status&&(0,a.jsx)(et,{isEditing:m,task:t,handleEdit:y,setIsEditing:p}),(0,a.jsxs)("div",{className:"transition-all duration-300 ease-in-out overflow-hidden ".concat(c?"max-h-auto mt-2":"max-h-0"),children:[(0,a.jsx)(ea,{isEditing:m,task:t,handleEdit:y,setIsEditing:p}),"inbox"!==t.status&&(0,a.jsx)(es,{currentView:o,noUpdatesError:b,task:t,showUpdateField:f,updateText:g,setUpdateText:x,handleUpdates:()=>{f?g.trim()&&(l(t.id,g.trim()),x(""),v(!1),h(!1)):h(!0)}})]})]}),(0,a.jsx)($,{task:t,onAction:s,setNoUpdatesError:v,setUpdateField:h})]}),d]})};function $(e){let{task:t,onAction:s,setNoUpdatesError:r,setUpdateField:n}=e;return(0,a.jsxs)("div",{className:"flex-shrink-0 ml-4 space-x-2",children:["inbox"===t.status&&(0,a.jsx)("button",{onClick:()=>s(t.id,"today"),className:"text-xl font-medium  text-orange-500 border-orange-500",title:"Move to Today",children:"\uD83C\uDFAF"}),"today"===t.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{if(0===t.updates.length){r(!0),n(!0);return}s(t.id,"done")},className:"text-xl",title:"Mark Done",children:"✅"}),(0,a.jsx)("button",{onClick:()=>{if(0===t.updates.length){r(!0),n(!0);return}s(t.id,"pause")},className:"text-xl",title:"Pause",children:"⏸️"})]}),"paused"===t.status&&(0,a.jsx)("button",{onClick:()=>s(t.id,"resume"),className:"text-xl",title:"Resume Task",children:"▶️"})]})}function ee(e){let{task:t}=e;return(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-400 border-l-2 border-gray-600 pl-2",children:[(0,a.jsx)("b",{children:"Reason to Mark as Done: "}),t.doneRemarks&&(0,a.jsx)("p",{className:"italic mt-1 font-medium ",children:t.doneRemarks}),(0,a.jsx)("br",{}),(0,a.jsxs)("p",{className:"mt-1 font-medium",children:["Completed: ",new Date(t.completedAt).toLocaleString()]})]})}function et(e){let{isEditing:t,task:s,handleEdit:r,setIsEditing:n}=e;return(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-400 border-l-2 border-gray-600 pl-2",children:[(0,a.jsx)("b",{children:"Reason to pause this "}),"pausedContext"===t?(0,a.jsx)("textarea",{className:"w-full bg-gray-800 border border-gray-600 rounded-md p-2 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500",defaultValue:s.pausedContext||"",onBlur:e=>r("pausedContext",e.target.value),onKeyPress:e=>"Enter"===e.key&&!e.shiftKey&&e.target.blur(),autoFocus:!0}):(0,a.jsxs)("p",{className:"italic editable",onClick:()=>n("pausedContext"),children:[s.pausedContext||"Add context...",(0,a.jsxs)("p",{className:"mt-1 font-medium",children:[(0,a.jsx)("br",{}),"Resume: ",s.resumeDate,s.resumeDate?new Date(s.resumeDate).toLocaleDateString(void 0,{timeZone:"UTC"}):"anytime"]})]})]})}function es(e){var t;let{noUpdatesError:s,task:r,currentView:n,showUpdateField:o,updateText:l,setUpdateText:i,handleUpdates:d}=e;return(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-amber-600 mb-1",children:"Updates:"}),s&&(0,a.jsx)("span",{className:"text-red-400 text-xs",children:"An update is required to Pause or mark as Done."}),(0,a.jsx)("div",{className:"updates-list mt-2 space-y-1",children:null===(t=r.updates)||void 0===t?void 0:t.map((e,t)=>(0,a.jsx)(Q,{str:e},t))}),o&&(0,a.jsx)("textarea",{className:"mt-2 w-full bg-gray-900 border border-gray-600 rounded-md p-2 text-sm outline-none resize-none field-sizing-content",placeholder:"Add an update...",value:l,onKeyUp:e=>G(e.target),onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),d())}}),"inbox"!=n&&(0,a.jsx)("button",{className:"mt-2 py-1 px-3 bg-orange-600 hover:bg-orange-500 rounded-md text-sm font-medium text-white",onClick:d,children:o?"Save Update":"Add Update"})]})}function ea(e){let{isEditing:t,task:s,handleEdit:r,setIsEditing:n}=e;return(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:[(0,a.jsx)("b",{className:"text-amber-600",children:"Details:"}),"details"===t?(0,a.jsx)("textarea",{onKeyUp:e=>G(e.target),className:"w-full p-2 text-sm  field-sizing-content break-all outline-none resize-none bg-gray-800",defaultValue:s.details||"",onBlur:e=>r("details",e.target.value),autoFocus:!0}):(0,a.jsx)(Q,{str:s.details||"Add extra details Here...",onClick:()=>n("details")})]})})}function er(e){let{setIsDetailsOpen:t,isDetailsOpen:s,isEditing:r,task:n,handleEdit:o,setIsEditing:l,onProjectFilter:i}=e;return(0,a.jsxs)("div",{className:"flex items-center cursor-pointer",onClick:()=>t(!s),onDoubleClick:()=>l("description"),children:["description"===r?(0,a.jsx)("input",{type:"text",className:"w-full bg-gray-800 border border-gray-600 rounded-md p-2 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500",defaultValue:n.description,onBlur:e=>o("description",e.target.value),onKeyPress:e=>"Enter"===e.key&&!e.shiftKey&&e.target.blur(),autoFocus:!0}):(0,a.jsx)(H,{text:n.description}),n.projectId&&(0,a.jsxs)("span",{className:"ml-2 text-xs bg-gray-700 text-orange-400 px-2 py-1 rounded-full cursor-pointer",onClick:e=>{e.stopPropagation(),i(n.projectId)},children:["#",n.projectId]})]})}let en=e=>{let{onSubmit:t,onCancel:s}=e;return(0,a.jsxs)("form",{onSubmit:t,children:[(0,a.jsx)("p",{className:"font-semibold text-orange-400 mb-3",children:"Pause with context so Future You knows where to pick up."}),(0,a.jsx)("textarea",{name:"pause-context",rows:2,className:"w-full bg-gray-900 border border-gray-600 rounded-md p-2 focus:outline-none focus:ring-1 focus:ring-orange-500",placeholder:"e.g., Blocked by API issue..."}),(0,a.jsx)("input",{type:"date",name:"resume-date",className:"mt-2 w-full bg-gray-900 border border-gray-600 rounded-md p-2 focus:outline-none focus:ring-1 focus:ring-orange-500"}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-3",children:[(0,a.jsx)("button",{type:"button",onClick:s,className:"py-1 px-3 bg-gray-600 hover:bg-gray-500 rounded-md text-sm font-medium",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"py-1 px-3 bg-orange-600 hover:bg-orange-500 rounded-md text-sm font-medium text-white",children:"Confirm Pause"})]})]})},eo=e=>{let{onSubmit:t,onCancel:s}=e;return(0,a.jsxs)("form",{onSubmit:t,children:[(0,a.jsx)("p",{className:"font-semibold text-orange-400 mb-3",children:"Great job! Add any final remarks."}),(0,a.jsx)("textarea",{id:"done-remarks",name:"done-remarks",rows:2,className:"w-full bg-gray-900 border border-gray-600 rounded-md p-2 focus:outline-none focus:ring-1 focus:ring-orange-500",placeholder:"e.g., Fixed bug, tested successfully..."}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-3",children:[(0,a.jsx)("button",{type:"button",onClick:s,className:"py-1 px-3 bg-gray-600 hover:bg-gray-500 rounded-md text-sm font-medium",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"py-1 px-3 bg-orange-600 hover:bg-orange-500 rounded-md text-sm font-medium text-white",children:"Confirm Done"})]})]})},el=e=>{let{tasks:t,currentView:s,editingTaskId:r,action:n,searchQuery:o,activeFilterProject:l,onAction:i,onEditField:d,onAddUpdate:c,onProjectFilter:u,onPauseSubmit:m,onDoneSubmit:p,onCancelEdit:g}=e,x={inbox:[],today:[],paused:[],done:[]};return t.forEach(e=>{"paused"==e.status&&x.inbox.push(e),x[e.status]&&x[e.status].push(e)}),(0,a.jsx)("div",{children:["inbox","today","paused","done"].map(e=>{var t;return(0,a.jsxs)("div",{className:"view ".concat(o?"":s===e?"":"hidden"),children:["today"===e&&x[e].length>5&&(0,a.jsx)("p",{className:"text-sm text-amber-400 bg-amber-900/50 p-2 rounded-md mb-4",children:"A long list can be overwhelming. Consider pausing some tasks to maintain focus."}),(0,a.jsx)("div",{className:"space-y-3",children:(null===(t=x[e])||void 0===t?void 0:t.length)>0?x[e].sort((t,s)=>new Date("done"===e?s.completedAt:s.createdAt).getTime()-new Date("done"===e?t.completedAt:t.createdAt).getTime()).map(e=>(0,a.jsxs)(X,{task:e,currentView:s,onAction:i,onEditField:d,onAddUpdate:c,onProjectFilter:u,children:[(0,a.jsx)("div",{className:"bg-gray-800 p-4 rounded-b-lg mt-1 ".concat(r===e.id&&"pause"===n?"":"hidden"),children:(0,a.jsx)(en,{onSubmit:m,onCancel:g})}),(0,a.jsx)("div",{className:"bg-gray-800 p-4 rounded-b-lg mt-1 ".concat(r===e.id&&"done"===n?"":"hidden"),children:(0,a.jsx)(eo,{onSubmit:p,onCancel:g})})]},e.id)):(0,a.jsxs)("p",{className:"text-gray-500 italic mt-4",children:["No tasks in this view",l?" for #".concat(l):"","."]})})]},e)})})},ei=e=>{let{notification:t}=e;return(0,a.jsx)("div",{id:"notification-toast",className:t?"show":"",children:(0,a.jsx)("span",{children:t})})};function ed(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(0===e.filter(e=>"today"==e.status).length?"today":"inbox"),[o,l]=(0,r.useState)(null),[i,d]=(0,r.useState)(null),[c,u]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),[b,v]=(0,r.useState)(!1),[y,j]=(0,r.useState)(!1),[w,k]=(0,r.useState)(null),[N,S]=(0,r.useState)(0),[C,I]=(0,r.useState)(""),A=(0,r.useMemo)(()=>g(),[]),U=(0,r.useMemo)(()=>f(),[]),D=(0,r.useMemo)(()=>x(),[w]);if((0,r.useEffect)(()=>{let{user:e}=A.getCurrentUser();k(t=>(null==t?void 0:t.id)===(null==e?void 0:e.id)?t:e)},[A]),(0,r.useEffect)(()=>{t(D.getInitialState().tasks)},[D,N,U]),(0,r.useEffect)(()=>{if(m){let e=setTimeout(()=>p(""),3e3);return()=>clearTimeout(e)}},[m]),!w)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(W,{onSignInClick:()=>j(!0),onSignUpClick:()=>v(!0)}),(0,a.jsx)(P,{open:b,onOpenChange:v,onSignUp:(e,t)=>{let{success:s,user:a,error:r}=A.signUp(e,t);s?(k(a),v(!1)):alert(r)}}),(0,a.jsx)(z,{open:y,onOpenChange:j,onSignIn:(e,t)=>{let{success:s,user:a,error:r}=A.signIn(e,t);s?(k(a),S(e=>e+1),j(!1)):alert(r)}})]});let T=e.filter(e=>e.description.toLowerCase().includes(C.toLowerCase())).filter(e=>!o||e.projectId===o),O={inbox:[],today:[],paused:[],done:[]};T.forEach(e=>{O[e.status]&&O[e.status].push(e)});let E=Object.keys(O).reduce((t,s)=>{let a=e.filter(e=>e.status===s).length,r=O[s].length;return t[s]=a>0?"".concat(s.charAt(0).toUpperCase()+s.slice(1),": ").concat(o?"".concat(r,"/").concat(a):a):"",t},{});return(0,a.jsxs)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-12 bg-gray-900 text-white min-h-screen",children:[(0,a.jsx)("style",{children:"\n                body { background-color: #111827; }\n                .nav-btn { transition: all 0.2s ease-in-out; }\n                .view { animation: fadeIn 0.5s ease-in-out; }\n                @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }\n                #notification-toast { position: fixed;  left: 85%; bottom: 20px; transform: translateX(-50%); background-color: #1f2937; color: #f97316; padding: 12px 24px; border-radius: 8px; border: 1px solid #374151; transition: all 0.3s ease-in-out; opacity: 0; pointer-events: none; }\n                #notification-toast.show { opacity: 1; pointer-events: auto; }\n            "}),(0,a.jsx)(K,{email:w.email,onSignOut:()=>{let{success:e}=A.signOut();e&&k(null)}}),(0,a.jsxs)("main",{children:[(0,a.jsx)(Z,{searchQuery:C,onSearchQueryChange:I,onSearchSubmit:e=>{e.preventDefault();let s=C.trim();if(!s)return;I("");let a=D.addTask(s);a.success&&(t(a.tasks||[]),p("Task added to Inbox."))}}),(0,a.jsx)(Y,{currentView:s,counts:E,activeFilterProject:o,onSetCurrentView:n,onClearActiveFilterProject:()=>l(null)}),(0,a.jsxs)("div",{children:["spaces"===s&&(0,a.jsx)(h,{handleSpaceChange:e=>{U.setSpace(e).success&&(S(e=>e+1),p("Switched to ".concat(e," space.")))}}),(0,a.jsx)(el,{tasks:T,currentView:s,editingTaskId:i,action:c,searchQuery:C,activeFilterProject:o,onAction:(e,s)=>{if(u(s),"done"===s||"pause"===s)d(e);else{let a="today"===s?D.moveTaskToToday(e):D.resumeTask(e);a.success&&(t(a.tasks||[]),n("today"),p("Task moved to Today."))}},onEditField:(e,s,a)=>{let r=D.updateTaskField(e,s,a);r.success&&t(r.tasks||[]),p("".concat(s.charAt(0).toUpperCase()+s.slice(1)," updated."))},onAddUpdate:(e,s)=>{let a=D.addTaskUpdate(e,s);a.success&&(t(a.tasks||[]),p("Update added.")),a.error&&p("update Failed.")},onProjectFilter:l,onPauseSubmit:e=>{e.preventDefault();let s=e.currentTarget.elements.namedItem("pause-context").value,a=e.currentTarget.elements.namedItem("resume-date").value,r=D.pauseTask(i,{context:s,resumeDate:a});r.success&&(t(r.tasks||[]),d(null),n("paused"),p("Task paused."))},onDoneSubmit:e=>{e.preventDefault();let s=e.currentTarget.elements.namedItem("done-remarks").value,a=D.completeTask(i,{remarks:s});a.success&&(t(a.tasks||[]),d(null),n("done"),p("Task marked as done!"))},onCancelEdit:()=>d(null)})]})]}),(0,a.jsx)(ei,{notification:m})]})}},9268:(e,t,s)=>{Promise.resolve().then(s.bind(s,417))}},e=>{var t=t=>e(e.s=t);e.O(0,[947,441,684,358],()=>t(9268)),_N_E=e.O()}]);