(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{417:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ed});var s=a(5155),r=a(2115);let n=()=>{try{if("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID)return"task_".concat(crypto.randomUUID())}catch(e){}return"task_".concat(Date.now(),"_").concat(Math.random().toString(36).slice(2,10))},o={create:e=>{let{description:t,projectId:a=null}=e;return{id:n(),description:t,projectId:a,status:"inbox",details:"",updates:[],pausedContext:null,resumeDate:null,doneRemarks:null,createdAt:new Date().toISOString(),completedAt:null}}},l={create:function(){let{space:e="Work"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{space:e}}},i={create:e=>{let{email:t,password:a}=e;return{id:"user_".concat(Date.now()),email:t,password:a,createdAt:new Date().toISOString()}}},d=function(){var e,t;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"anonymous",s="solo-flow-tasks",r=e=>"".concat(s,"+").concat(a,"+").concat(e);return a=null!==(t=null===(e=u().getAuthenticatedUser())||void 0===e?void 0:e.id)&&void 0!==t?t:"anonymous",{getAll:e=>{var t,s;let n=e||(null===(t=localStorage)||void 0===t?void 0:t.getItem("solo-flow-space-".concat(a)))||"Work",o=JSON.parse((null===(s=localStorage)||void 0===s?void 0:s.getItem(r(n)))||"[]"),l=new Set,i=[];for(let e of o)e&&e.id&&!l.has(e.id)&&(l.add(e.id),i.push(e));return i.length!==o.length&&localStorage.setItem(r(n),JSON.stringify(i,null,2)),i},save:e=>{var t,s;let n=(null===(t=localStorage)||void 0===t?void 0:t.getItem("solo-flow-space-".concat(a)))||"Work",o=JSON.parse((null===(s=localStorage)||void 0===s?void 0:s.getItem(r(n)))||"[]");o.unshift(e);let l=new Set,i=o.filter(e=>!(!e||!e.id||l.has(e.id))&&(l.add(e.id),!0));localStorage.setItem(r(n),JSON.stringify(i,null,2))},update:e=>{var t,s;let n=(null===(t=localStorage)||void 0===t?void 0:t.getItem("solo-flow-space-".concat(a)))||"Work",o=JSON.parse((null===(s=localStorage)||void 0===s?void 0:s.getItem(r(n)))||"[]");o=o.map(t=>t.id===e.id?e:t),localStorage.setItem(r(n),JSON.stringify(o,null,2))},findById:e=>{var t,s;let n=(null===(t=localStorage)||void 0===t?void 0:t.getItem("solo-flow-space-".concat(a)))||"Work";return JSON.parse((null===(s=localStorage)||void 0===s?void 0:s.getItem(r(n)))||"[]").find(t=>t.id===e)},merge:e=>{let t=[...d("anonymous").getAll("Work"),...d(e).getAll("Work")],a=new Set,r=t.filter(e=>!(!e||!e.id||a.has(e.id))&&(a.add(e.id),!0));localStorage.setItem("".concat(s,"+").concat(e,"+Work"),JSON.stringify(r,null,2)),localStorage.removeItem("".concat(s,"+anonymous+Work")),localStorage.removeItem("".concat(s,"+anonymous+Personal")),localStorage.removeItem("".concat(s,"+anonymous+Project"))}}},c=e=>{var t,a;e=null!==(a=null===(t=u().getAuthenticatedUser())||void 0===t?void 0:t.id)&&void 0!==a?a:"anonymous";let s="solo-flow-space-".concat(e),r=l.create();return{get:()=>{var t,a;let n=JSON.parse(null!==(a=String(null===(t=localStorage)||void 0===t?void 0:t.getItem(s)))&&void 0!==a?a:"");return!1==!!n&&c(e).save(r),n?{space:n}:r},save:e=>{localStorage.setItem(s,JSON.stringify(e.space,null,2))}}},u=()=>{let e="pulse-note-auth";return{getAuthenticatedUser:()=>{var t;let a=null===(t=localStorage)||void 0===t?void 0:t.getItem(e);return a?JSON.parse(a):null},setAuthenticatedUser:t=>{localStorage.setItem(e,JSON.stringify(t,null,2))},clearAuthenticatedUser:()=>{localStorage.removeItem(e)}}},m=(()=>{let e="pulse-note-users";return{findByEmail:t=>{var a;return JSON.parse((null===(a=localStorage)||void 0===a?void 0:a.getItem(e))||"[]").find(e=>e.email===t)},save:t=>{var a;let s=JSON.parse((null===(a=localStorage)||void 0===a?void 0:a.getItem(e))||"[]");s.push(t),localStorage.setItem(e,JSON.stringify(s,null,2))}}})(),p=u(),g=()=>({signUp:(e,t)=>{if(!e||!t)return{success:!1,error:"Email and password are required."};if(m.findByEmail(e))return{success:!1,error:"User with this email already exists."};let a=i.create({email:e,password:t});return m.save(a),p.setAuthenticatedUser(a),d().merge(a.id),{success:!0,user:a}},signIn:(e,t)=>{let a=m.findByEmail(e);return a&&a.password===t?(p.setAuthenticatedUser(a),d().merge(a.id),{success:!0,user:a}):{success:!1,error:"Invalid email or password."}},signOut:()=>(p.clearAuthenticatedUser(),{success:!0}),getCurrentUser:()=>({success:!0,user:p.getAuthenticatedUser()})}),x=()=>{var e;let{user:t}=g().getCurrentUser(),a=d(null==t?void 0:t.id),s=null!==(e=null==t?void 0:t.id)&&void 0!==e?e:"anonymous";return{getInitialState:()=>{var e;let t=(null===(e=localStorage)||void 0===e?void 0:e.getItem("solo-flow-space-".concat(s)))||"Work";return{tasks:a.getAll(t)}},addTask:e=>{var t;if(!e||""===e.trim())return{success:!1,error:"Task description cannot be empty."};let r=e.match(/\s#([\w-]+)$/),n=r?r[1]:null,l=o.create({description:e,projectId:n});a.save(l);let i=(null===(t=localStorage)||void 0===t?void 0:t.getItem("solo-flow-space-".concat(s)))||"Work";return{success:!0,tasks:a.getAll(i)}},moveTaskToToday:e=>{let t=a.findById(e);if(t){var r;t.status="today",a.update(t);let e=(null===(r=localStorage)||void 0===r?void 0:r.getItem("solo-flow-space-".concat(s)))||"Work";return{success:!0,tasks:a.getAll(e)}}return{success:!1,error:"Task not found."}},pauseTask:(e,t)=>{let{context:r,resumeDate:n}=t,o=a.findById(e);if(o){var l;o.status="paused",o.pausedContext=r,o.resumeDate=n,a.update(o);let e=(null===(l=localStorage)||void 0===l?void 0:l.getItem("solo-flow-space-".concat(s)))||"Work";return{success:!0,tasks:a.getAll(e)}}return{success:!1,error:"Task not found."}},resumeTask:e=>{let t=a.findById(e);if(t){var r;t.status="today",t.pausedContext=null,t.resumeDate=null,a.update(t);let e=(null===(r=localStorage)||void 0===r?void 0:r.getItem("solo-flow-space-".concat(s)))||"Work";return{success:!0,tasks:a.getAll(e)}}return{success:!1,error:"Task not found."}},completeTask:(e,t)=>{let{remarks:r}=t,n=a.findById(e);if(n){var o;n.status="done",n.doneRemarks=r,n.completedAt=new Date().toISOString(),a.update(n);let e=(null===(o=localStorage)||void 0===o?void 0:o.getItem("solo-flow-space-".concat(s)))||"Work";return{success:!0,tasks:a.getAll(e)}}return{success:!1,error:"Task not found."}},updateTaskField:(e,t,r)=>{let n=a.findById(e);if(n&&void 0!==n[t]){var o;n[t]=r,a.update(n);let e=(null===(o=localStorage)||void 0===o?void 0:o.getItem("solo-flow-space-".concat(s)))||"Work";return{success:!0,tasks:a.getAll(e)}}return{success:!1,error:"Task or field '".concat(t,"' not found.")}},addTaskUpdate:(e,t)=>{let r=a.findById(e);if(r){var n;r.updates=[t,...r.updates||[]],a.update(r);let e=(null===(n=localStorage)||void 0===n?void 0:n.getItem("solo-flow-space-".concat(s)))||"Work";return{success:!0,tasks:a.getAll(e)}}return{success:!1,error:"Task not found."}}}},f=()=>{let e=g().getCurrentUser(),t=c(e.user?e.user.id:"");return{getSettings:()=>t.get(),setSpace:e=>{let a=t.get();return a.space=e,t.save(a),{success:!0,settings:a}}}},h=e=>{let{handleSpaceChange:t}=e,[a,n]=(0,r.useState)(),o=e=>{n({space:e}),t(e)};return(0,r.useEffect)(()=>{n(f().getSettings())},[]),(0,s.jsx)("div",{className:"max-w-md w-full p-4",children:(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("legend",{className:"text-lg font-semibold text-white mb-4",children:"Select Your Current Space"}),(0,s.jsx)("div",{className:"space-y-3",children:[{id:"space-work",value:"Work",label:"Work Day"},{id:"space-personal",value:"Personal",label:"Personal Day"},{id:"space-project",value:"Project",label:"Project Day"}].map(e=>(0,s.jsxs)("label",{htmlFor:e.id,className:"flex items-center justify-between w-full p-4 cursor-pointer bg-gray-900 border border-gray-700 rounded-lg hover:bg-gray-800",children:[(0,s.jsx)("span",{className:"text-gray-200 font-medium",children:e.label}),(0,s.jsx)("input",{type:"radio",id:e.id,name:"space",value:e.value,checked:(null==a?void 0:a.space)===e.value,onChange:e=>o(e.target.value),className:"form-radio h-5 w-5 text-orange-600 bg-gray-700 border-gray-600 focus:ring-orange-500"})]},e.id))})]})})};var v=a(2505),b=a(450),y=a(2596),j=a(9688);function w(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,j.QP)((0,y.$)(t))}function k(e){let{...t}=e;return(0,s.jsx)(v.bL,{"data-slot":"dialog",...t})}function N(e){let{...t}=e;return(0,s.jsx)(v.ZL,{"data-slot":"dialog-portal",...t})}function S(e){let{className:t,...a}=e;return(0,s.jsx)(v.hJ,{"data-slot":"dialog-overlay",className:w("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function C(e){let{className:t,children:a,showCloseButton:r=!0,...n}=e;return(0,s.jsxs)(N,{"data-slot":"dialog-portal",children:[(0,s.jsx)(S,{}),(0,s.jsxs)(v.UC,{"data-slot":"dialog-content",className:w("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[a,r&&(0,s.jsxs)(v.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(b.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function I(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:w("flex flex-col gap-2 text-center sm:text-left",t),...a})}function A(e){let{className:t,...a}=e;return(0,s.jsx)(v.hE,{"data-slot":"dialog-title",className:w("text-lg leading-none font-semibold",t),...a})}function U(e){let{className:t,type:a,...r}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:w("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r})}var D=a(9708);let T=(0,a(2085).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function E(e){let{className:t,variant:a,size:r,asChild:n=!1,...o}=e,l=n?D.DX:"button";return(0,s.jsx)(l,{"data-slot":"button",className:w(T({variant:a,size:r,className:t})),...o})}var O=a(968);function F(e){let{className:t,...a}=e;return(0,s.jsx)(O.b,{"data-slot":"label",className:w("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}let P=e=>{let{open:t,onOpenChange:a,onSignUp:n}=e,[o,l]=(0,r.useState)(""),[i,d]=(0,r.useState)("");return(0,s.jsx)(k,{open:t,onOpenChange:a,children:(0,s.jsxs)(C,{className:"max-w-md",children:[(0,s.jsx)(I,{children:(0,s.jsx)(A,{children:"Sign Up"})}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(o,i)},className:"mt-4",children:[(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(F,{htmlFor:"email",children:"Email"}),(0,s.jsx)(U,{id:"email",type:"email",placeholder:"m@example.com",required:!0,value:o,onChange:e=>l(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(F,{htmlFor:"password",children:"Password"}),(0,s.jsx)(U,{id:"password",type:"password",required:!0,value:i,onChange:e=>d(e.target.value)})]})]}),(0,s.jsx)(E,{type:"submit",className:"mt-4 w-full",children:"Sign Up"})]})]})})},z=e=>{let{open:t,onOpenChange:a,onSignIn:n}=e,[o,l]=(0,r.useState)(""),[i,d]=(0,r.useState)("");return(0,s.jsx)(k,{open:t,onOpenChange:a,children:(0,s.jsxs)(C,{className:"max-w-md",children:[(0,s.jsx)(I,{children:(0,s.jsx)(A,{children:"Sign In"})}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(o,i)},className:"mt-4",children:[(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(F,{htmlFor:"email",children:"Email"}),(0,s.jsx)(U,{id:"email",type:"email",placeholder:"m@example.com",required:!0,value:o,onChange:e=>l(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(F,{htmlFor:"password",children:"Password"}),(0,s.jsx)(U,{id:"password",type:"password",required:!0,value:i,onChange:e=>d(e.target.value)})]})]}),(0,s.jsx)(E,{type:"submit",className:"mt-4 w-full",children:"Sign In"})]})]})})},W=e=>{let{onSignInClick:t,onSignUpClick:a}=e;return(0,s.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center bg-gray-900 text-white",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-5xl font-bold",children:"Welcome to DevNote"}),(0,s.jsx)("p",{className:"mt-4 text-lg text-gray-400",children:"A minimalist to-do app for developers."}),(0,s.jsxs)("div",{className:"mt-8 space-x-4",children:[(0,s.jsx)(E,{onClick:t,variant:"outline",children:"Sign In"}),(0,s.jsx)(E,{onClick:a,children:"Sign Up"})]})]})})};var J=a(3196);let B=J.bL,_=J.l9;J.YJ,J.ZL,J.Pb,J.z6,r.forwardRef((e,t)=>{let{className:a,inset:r,children:n,...o}=e;return(0,s.jsxs)(J.ZP,{ref:t,className:w("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-orange-500 data-[state=open]:bg-orange-500",r&&"pl-8",a),...o,children:[n,(0,s.jsx)(V,{className:"ml-auto h-4 w-4"})]})}).displayName=J.ZP.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(J.G5,{ref:t,className:w("z-50 min-w-[8rem] overflow-hidden rounded-md border border-gray-700 bg-gray-800 p-1 text-white shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=J.G5.displayName;let R=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...n}=e;return(0,s.jsx)(J.ZL,{children:(0,s.jsx)(J.UC,{ref:t,sideOffset:r,className:w("z-50 min-w-[8rem] overflow-hidden rounded-md border border-gray-700 bg-gray-800 p-1 text-white shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});R.displayName=J.UC.displayName;let L=r.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(J.q7,{ref:t,className:w("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-orange-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",a),...n})});function M(e){return(0,s.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("path",{d:"M20 6 9 17l-5-5"})})}function V(e){return(0,s.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("path",{d:"m9 18 6-6-6-6"})})}function q(e){return(0,s.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10"})})}L.displayName=J.q7.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,checked:n,...o}=e;return(0,s.jsxs)(J.H_,{ref:t,className:w("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-orange-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...o,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(J.VF,{children:(0,s.jsx)(M,{className:"h-4 w-4"})})}),r]})}).displayName=J.H_.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(J.hN,{ref:t,className:w("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-orange-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(J.VF,{children:(0,s.jsx)(q,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=J.hN.displayName,r.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(J.JU,{ref:t,className:w("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...n})}).displayName=J.JU.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(J.wv,{ref:t,className:w("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=J.wv.displayName;let K=e=>{let{email:t,onSignOut:a}=e;return(0,s.jsx)("header",{className:"text-center mb-10",children:(0,s.jsxs)("p",{className:"mt-2 text-lg text-gray-400",children:["Become a better engineer. \xa0",(0,s.jsxs)(B,{children:[(0,s.jsx)(_,{asChild:!0,children:(0,s.jsx)("button",{className:"text-lg text-gray-400 hover:text-white",children:":::"})}),(0,s.jsx)(R,{children:(0,s.jsxs)(L,{onSelect:a,children:["Sign Out ",t," "]})})]})]})})},Z=e=>{let{searchQuery:t,onSearchQueryChange:a,onSearchSubmit:r}=e;return(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)("form",{onSubmit:r,className:"relative",children:[(0,s.jsx)("input",{type:"text",placeholder:"Search tasks or add a new one...",value:t,onChange:e=>a(e.target.value),className:"w-full bg-gray-800 border-2 border-gray-700 rounded-lg py-3 px-4 pl-10 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition"}),(0,s.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-500 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",onClick:e=>{var t;return null===(t=e.currentTarget.closest("form"))||void 0===t?void 0:t.requestSubmit()},children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})]})})},Y=e=>{let{currentView:t,counts:a,activeFilterProject:r,onSetCurrentView:n,onClearActiveFilterProject:o}=e;return(0,s.jsxs)("div",{className:"border-b border-gray-700 mb-8",children:[(0,s.jsx)("nav",{className:"flex flex-wrap space-x-1 sm:space-x-2",children:["inbox","today","paused","done","spaces"].map(e=>{var r,o,l,i;return(0,s.jsxs)("button",{onClick:()=>n(e),className:"nav-btn py-2 px-4 font-medium border-b-2 ".concat(t===e?"text-orange-500 border-orange-500":"text-gray-400 border-transparent hover:text-white"),children:[e.charAt(0).toUpperCase()+e.slice(1),"inbox"===e&&parseInt(null!==(i=null===(l=a.inbox)||void 0===l?void 0:null===(o=l.split(":"))||void 0===o?void 0:null===(r=o[1])||void 0===r?void 0:r.trim())&&void 0!==i?i:"0")>8&&(0,s.jsx)("span",{className:"mt-1",children:" \uD83D\uDD25 "})]},e)})}),(0,s.jsxs)("div",{className:"mt-2 text-sm text-gray-500 flex flex-wrap gap-x-4",children:[(0,s.jsx)("span",{children:a.inbox}),(0,s.jsx)("span",{children:a.today}),(0,s.jsx)("span",{children:a.paused}),(0,s.jsx)("span",{children:a.done})]}),r&&(0,s.jsxs)("div",{className:"items-center mt-2 flex",children:[(0,s.jsx)("span",{className:"text-sm mr-2 text-gray-400",children:"Filtering by:"}),(0,s.jsx)("span",{className:"text-xs bg-gray-700 text-orange-400 px-2 py-1 rounded-full",children:"#".concat(r)}),(0,s.jsx)("button",{onClick:o,className:"ml-2 text-xl font-bold text-gray-500 hover:text-white",children:"\xd7"})]})]})},H=e=>{let{text:t}=e,a=/(https?:\/\/[^\s]+)/g,r=t.split(a);return(0,s.jsx)("p",{className:"text-gray-200",children:r.map((e,t)=>e.match(a)?(0,s.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",onClick:e=>e.stopPropagation(),children:e},t):e)})},Q=e=>{let{str:t,onClick:a,...n}=e,o=(0,r.useMemo)(()=>(function(e){try{let t=JSON.parse(e);return null!==t&&("object"==typeof t||Array.isArray(t))}catch(e){return console.log("Invalid JSON:",e),!1}})(t),[t]);return(0,s.jsx)(s.Fragment,{children:o?(0,s.jsx)("code",{onClick:a,className:"whitespace-pre-wrap\n  block\n  bg-gray-900\n  text-white\n  text-sm\n  font-mono\n  rounded-md\n  p-4\n  min-h-[20px]\n  overflow-x-auto\n  shadow-sm\n  cursor-pointer\n  transition\n  duration-200\n  ease-in-out\n  focus:outline-none\n  focus:ring-2\n  focus:ring-white\n  focus:ring-offset-2\n  select-textt",...n,children:t}):(0,s.jsxs)("div",{onClick:a,className:"flex items-start whitespace-pre-wrap text-sm text-gray-400 min-h-[20px] break-words break-all",...n,children:[(0,s.jsx)("div",{className:"ml-[15px] mr-3",children:"-"}),(0,s.jsx)("div",{children:t})]})})};function G(e){e.style.height=25+e.scrollHeight+"px"}let X=e=>{let{task:t,onAction:a,onEditField:n,currentView:o,onAddUpdate:l,onProjectFilter:i,children:d}=e,[c,u]=(0,r.useState)(!0),[m,p]=(0,r.useState)(null),[g,x]=(0,r.useState)(""),[f,h]=(0,r.useState)(!1),[v,b]=(0,r.useState)(!1),y=(e,a)=>{p(null),n(t.id,e,a)};return(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg","data-task-id":t.id,children:[(0,s.jsxs)("div",{className:"p-4 flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)(er,{setIsDetailsOpen:u,isDetailsOpen:c,isEditing:m,task:t,handleEdit:y,setIsEditing:p,onProjectFilter:i}),"done"===t.status&&(0,s.jsx)(ee,{task:t}),"paused"===t.status&&(0,s.jsx)(et,{isEditing:m,task:t,handleEdit:y,setIsEditing:p}),(0,s.jsxs)("div",{className:"transition-all duration-300 ease-in-out overflow-hidden ".concat(c?"max-h-auto mt-2":"max-h-0"),children:[(0,s.jsx)(es,{isEditing:m,task:t,handleEdit:y,setIsEditing:p}),"inbox"!==t.status&&(0,s.jsx)(ea,{currentView:o,noUpdatesError:v,task:t,showUpdateField:f,updateText:g,setUpdateText:x,handleUpdates:()=>{f?g.trim()&&(l(t.id,g.trim()),x(""),b(!1),h(!1)):h(!0)}})]})]}),(0,s.jsx)($,{task:t,onAction:a,setNoUpdatesError:b,setUpdateField:h})]}),d]})};function $(e){let{task:t,onAction:a,setNoUpdatesError:r,setUpdateField:n}=e;return(0,s.jsxs)("div",{className:"flex-shrink-0 ml-4 space-x-2",children:["inbox"===t.status&&(0,s.jsx)("button",{onClick:()=>a(t.id,"today"),className:"text-xl font-medium  text-orange-500 border-orange-500",title:"Move to Today",children:"\uD83C\uDFAF"}),"today"===t.status&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>{if(0===t.updates.length){r(!0),n(!0);return}a(t.id,"done")},className:"text-xl",title:"Mark Done",children:"✅"}),(0,s.jsx)("button",{onClick:()=>{if(0===t.updates.length){r(!0),n(!0);return}a(t.id,"pause")},className:"text-xl",title:"Pause",children:"⏸️"})]}),"paused"===t.status&&(0,s.jsx)("button",{onClick:()=>a(t.id,"resume"),className:"text-xl",title:"Resume Task",children:"▶️"})]})}function ee(e){let{task:t}=e;return(0,s.jsxs)("div",{className:"mt-2 text-sm text-gray-400 border-l-2 border-gray-600 pl-2",children:[(0,s.jsx)("b",{children:"Reason to Mark as Done: "}),t.doneRemarks&&(0,s.jsx)("p",{className:"italic mt-1 font-medium ",children:t.doneRemarks}),(0,s.jsx)("br",{}),(0,s.jsxs)("p",{className:"mt-1 font-medium",children:["Completed: ",new Date(t.completedAt).toLocaleString()]})]})}function et(e){let{isEditing:t,task:a,handleEdit:r,setIsEditing:n}=e;return(0,s.jsxs)("div",{className:"mt-2 text-sm text-gray-400 border-l-2 border-gray-600 pl-2",children:[(0,s.jsx)("b",{children:"Reason to pause this "}),"pausedContext"===t?(0,s.jsx)("textarea",{className:"w-full bg-gray-800 border border-gray-600 rounded-md p-2 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500",defaultValue:a.pausedContext||"",onBlur:e=>r("pausedContext",e.target.value),onKeyPress:e=>"Enter"===e.key&&!e.shiftKey&&e.target.blur(),autoFocus:!0}):(0,s.jsxs)("p",{className:"italic editable",onClick:()=>n("pausedContext"),children:[a.pausedContext||"Add context...",(0,s.jsxs)("p",{className:"mt-1 font-medium",children:[(0,s.jsx)("br",{}),"Resume: ",a.resumeDate,a.resumeDate?new Date(a.resumeDate).toLocaleDateString(void 0,{timeZone:"UTC"}):"anytime"]})]})]})}function ea(e){var t;let{noUpdatesError:a,task:r,currentView:n,showUpdateField:o,updateText:l,setUpdateText:i,handleUpdates:d}=e;return(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-amber-600 mb-1",children:"Updates:"}),a&&(0,s.jsx)("span",{className:"text-red-400 text-xs",children:"An update is required to Pause or mark as Done."}),(0,s.jsx)("div",{className:"updates-list mt-2 space-y-1",children:null===(t=r.updates)||void 0===t?void 0:t.map((e,t)=>(0,s.jsx)(Q,{str:e},t))}),o&&(0,s.jsx)("textarea",{className:"mt-2 w-full bg-gray-900 border border-gray-600 rounded-md p-2 text-sm outline-none resize-none field-sizing-content",placeholder:"Add an update...",value:l,onKeyUp:e=>{"Enter"===e.key&&G(e.target)},onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),d())}}),"inbox"!=n&&(0,s.jsx)("button",{className:"mt-2 py-1 px-3 bg-orange-600 hover:bg-orange-500 rounded-md text-sm font-medium text-white",onClick:d,children:o?"Save Update":"Add Update"})]})}function es(e){let{isEditing:t,task:a,handleEdit:r,setIsEditing:n}=e;return(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:[(0,s.jsx)("b",{className:"text-amber-600",children:"Details:"}),"details"===t?(0,s.jsx)("textarea",{onKeyUp:e=>{"Enter"===e.key&&G(e.target)},className:"w-full p-2 text-sm  field-sizing-content break-all outline-none resize-none bg-gray-800",defaultValue:a.details||"",onBlur:e=>r("details",e.target.value),autoFocus:!0}):(0,s.jsx)(Q,{str:a.details||"Add extra details Here...",onClick:()=>n("details")})]})})}function er(e){let{setIsDetailsOpen:t,isDetailsOpen:a,isEditing:r,task:n,handleEdit:o,setIsEditing:l,onProjectFilter:i}=e;return(0,s.jsxs)("div",{className:"flex items-center cursor-pointer",onClick:()=>t(!a),onDoubleClick:()=>l("description"),children:["description"===r?(0,s.jsx)("input",{type:"text",className:"w-full bg-gray-800 border border-gray-600 rounded-md p-2 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500",defaultValue:n.description,onBlur:e=>o("description",e.target.value),onKeyPress:e=>"Enter"===e.key&&!e.shiftKey&&e.target.blur(),autoFocus:!0}):(0,s.jsx)(H,{text:n.description}),n.projectId&&(0,s.jsxs)("span",{className:"ml-2 text-xs bg-gray-700 text-orange-400 px-2 py-1 rounded-full cursor-pointer",onClick:e=>{e.stopPropagation(),i(n.projectId)},children:["#",n.projectId]})]})}let en=e=>{let{onSubmit:t,onCancel:a}=e;return(0,s.jsxs)("form",{onSubmit:t,children:[(0,s.jsx)("p",{className:"font-semibold text-orange-400 mb-3",children:"Pause with context so Future You knows where to pick up."}),(0,s.jsx)("textarea",{name:"pause-context",rows:2,className:"w-full bg-gray-900 border border-gray-600 rounded-md p-2 focus:outline-none focus:ring-1 focus:ring-orange-500",placeholder:"e.g., Blocked by API issue..."}),(0,s.jsx)("input",{type:"date",name:"resume-date",className:"mt-2 w-full bg-gray-900 border border-gray-600 rounded-md p-2 focus:outline-none focus:ring-1 focus:ring-orange-500"}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 mt-3",children:[(0,s.jsx)("button",{type:"button",onClick:a,className:"py-1 px-3 bg-gray-600 hover:bg-gray-500 rounded-md text-sm font-medium",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"py-1 px-3 bg-orange-600 hover:bg-orange-500 rounded-md text-sm font-medium text-white",children:"Confirm Pause"})]})]})},eo=e=>{let{onSubmit:t,onCancel:a}=e;return(0,s.jsxs)("form",{onSubmit:t,children:[(0,s.jsx)("p",{className:"font-semibold text-orange-400 mb-3",children:"Great job! Add any final remarks."}),(0,s.jsx)("textarea",{id:"done-remarks",name:"done-remarks",rows:2,className:"w-full bg-gray-900 border border-gray-600 rounded-md p-2 focus:outline-none focus:ring-1 focus:ring-orange-500",placeholder:"e.g., Fixed bug, tested successfully..."}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 mt-3",children:[(0,s.jsx)("button",{type:"button",onClick:a,className:"py-1 px-3 bg-gray-600 hover:bg-gray-500 rounded-md text-sm font-medium",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"py-1 px-3 bg-orange-600 hover:bg-orange-500 rounded-md text-sm font-medium text-white",children:"Confirm Done"})]})]})},el=e=>{let{tasks:t,currentView:a,editingTaskId:r,action:n,searchQuery:o,activeFilterProject:l,onAction:i,onEditField:d,onAddUpdate:c,onProjectFilter:u,onPauseSubmit:m,onDoneSubmit:p,onCancelEdit:g}=e,x={inbox:[],today:[],paused:[],done:[]};return t.forEach(e=>{"paused"==e.status&&x.inbox.push(e),x[e.status]&&x[e.status].push(e)}),(0,s.jsx)("div",{children:["inbox","today","paused","done"].map(e=>{var t;return(0,s.jsxs)("div",{className:"view ".concat(o?"":a===e?"":"hidden"),children:["today"===e&&x[e].length>5&&(0,s.jsx)("p",{className:"text-sm text-amber-400 bg-amber-900/50 p-2 rounded-md mb-4",children:"A long list can be overwhelming. Consider pausing some tasks to maintain focus."}),(0,s.jsx)("div",{className:"space-y-3",children:(null===(t=x[e])||void 0===t?void 0:t.length)>0?x[e].sort((t,a)=>new Date("done"===e?a.completedAt:a.createdAt).getTime()-new Date("done"===e?t.completedAt:t.createdAt).getTime()).map(e=>(0,s.jsxs)(X,{task:e,currentView:a,onAction:i,onEditField:d,onAddUpdate:c,onProjectFilter:u,children:[(0,s.jsx)("div",{className:"bg-gray-800 p-4 rounded-b-lg mt-1 ".concat(r===e.id&&"pause"===n?"":"hidden"),children:(0,s.jsx)(en,{onSubmit:m,onCancel:g})}),(0,s.jsx)("div",{className:"bg-gray-800 p-4 rounded-b-lg mt-1 ".concat(r===e.id&&"done"===n?"":"hidden"),children:(0,s.jsx)(eo,{onSubmit:p,onCancel:g})})]},e.id)):(0,s.jsxs)("p",{className:"text-gray-500 italic mt-4",children:["No tasks in this view",l?" for #".concat(l):"","."]})})]},e)})})},ei=e=>{let{notification:t}=e;return(0,s.jsx)("div",{id:"notification-toast",className:t?"show":"",children:(0,s.jsx)("span",{children:t})})};function ed(){let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(0===e.filter(e=>"today"==e.status).length?"today":"inbox"),[o,l]=(0,r.useState)(null),[i,d]=(0,r.useState)(null),[c,u]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),[v,b]=(0,r.useState)(!1),[y,j]=(0,r.useState)(!1),[w,k]=(0,r.useState)(null),[N,S]=(0,r.useState)(0),[C,I]=(0,r.useState)(""),A=(0,r.useMemo)(()=>g(),[]),U=(0,r.useMemo)(()=>f(),[]),D=(0,r.useMemo)(()=>x(),[w]);if((0,r.useEffect)(()=>{let{user:e}=A.getCurrentUser();k(t=>(null==t?void 0:t.id)===(null==e?void 0:e.id)?t:e)},[A]),(0,r.useEffect)(()=>{t(D.getInitialState().tasks)},[D,N,U]),(0,r.useEffect)(()=>{if(m){let e=setTimeout(()=>p(""),3e3);return()=>clearTimeout(e)}},[m]),!w)return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(W,{onSignInClick:()=>j(!0),onSignUpClick:()=>b(!0)}),(0,s.jsx)(P,{open:v,onOpenChange:b,onSignUp:(e,t)=>{let{success:a,user:s,error:r}=A.signUp(e,t);a?(k(s),b(!1)):alert(r)}}),(0,s.jsx)(z,{open:y,onOpenChange:j,onSignIn:(e,t)=>{let{success:a,user:s,error:r}=A.signIn(e,t);a?(k(s),S(e=>e+1),j(!1)):alert(r)}})]});let T=e.filter(e=>e.description.toLowerCase().includes(C.toLowerCase())).filter(e=>!o||e.projectId===o),E={inbox:[],today:[],paused:[],done:[]};T.forEach(e=>{E[e.status]&&E[e.status].push(e)});let O=Object.keys(E).reduce((t,a)=>{let s=e.filter(e=>e.status===a).length,r=E[a].length;return t[a]=s>0?"".concat(a.charAt(0).toUpperCase()+a.slice(1),": ").concat(o?"".concat(r,"/").concat(s):s):"",t},{});return(0,s.jsxs)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-12 bg-gray-900 text-white min-h-screen",children:[(0,s.jsx)("style",{children:"\n                body { background-color: #111827; }\n                .nav-btn { transition: all 0.2s ease-in-out; }\n                .view { animation: fadeIn 0.5s ease-in-out; }\n                @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }\n                #notification-toast { position: fixed;  left: 85%; bottom: 20px; transform: translateX(-50%); background-color: #1f2937; color: #f97316; padding: 12px 24px; border-radius: 8px; border: 1px solid #374151; transition: all 0.3s ease-in-out; opacity: 0; pointer-events: none; }\n                #notification-toast.show { opacity: 1; pointer-events: auto; }\n            "}),(0,s.jsx)(K,{email:w.email,onSignOut:()=>{let{success:e}=A.signOut();e&&k(null)}}),(0,s.jsxs)("main",{children:[(0,s.jsx)(Z,{searchQuery:C,onSearchQueryChange:I,onSearchSubmit:e=>{e.preventDefault();let a=C.trim();if(!a)return;I("");let s=D.addTask(a);s.success&&(t(s.tasks||[]),p("Task added to Inbox."))}}),(0,s.jsx)(Y,{currentView:a,counts:O,activeFilterProject:o,onSetCurrentView:n,onClearActiveFilterProject:()=>l(null)}),(0,s.jsxs)("div",{children:["spaces"===a&&(0,s.jsx)(h,{handleSpaceChange:e=>{U.setSpace(e).success&&(S(e=>e+1),p("Switched to ".concat(e," space.")))}}),(0,s.jsx)(el,{tasks:T,currentView:a,editingTaskId:i,action:c,searchQuery:C,activeFilterProject:o,onAction:(e,a)=>{if(u(a),"done"===a||"pause"===a)d(e);else{let s="today"===a?D.moveTaskToToday(e):D.resumeTask(e);s.success&&(t(s.tasks||[]),n("today"),p("Task moved to Today."))}},onEditField:(e,a,s)=>{let r=D.updateTaskField(e,a,s);r.success&&t(r.tasks||[]),p("".concat(a.charAt(0).toUpperCase()+a.slice(1)," updated."))},onAddUpdate:(e,a)=>{let s=D.addTaskUpdate(e,a);s.success&&(t(s.tasks||[]),p("Update added.")),s.error&&p("update Failed.")},onProjectFilter:l,onPauseSubmit:e=>{e.preventDefault();let a=e.currentTarget.elements.namedItem("pause-context").value,s=e.currentTarget.elements.namedItem("resume-date").value,r=D.pauseTask(i,{context:a,resumeDate:s});r.success&&(t(r.tasks||[]),d(null),n("paused"),p("Task paused."))},onDoneSubmit:e=>{e.preventDefault();let a=e.currentTarget.elements.namedItem("done-remarks").value,s=D.completeTask(i,{remarks:a});s.success&&(t(s.tasks||[]),d(null),n("done"),p("Task marked as done!"))},onCancelEdit:()=>d(null)})]})]}),(0,s.jsx)(ei,{notification:m})]})}},9268:(e,t,a)=>{Promise.resolve().then(a.bind(a,417))}},e=>{var t=t=>e(e.s=t);e.O(0,[947,441,684,358],()=>t(9268)),_N_E=e.O()}]);